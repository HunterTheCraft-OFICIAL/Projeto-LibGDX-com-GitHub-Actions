name: Build LibGDX Environment

on: [push]

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest
    container:
      image: seu-usuario/gdx-liftoff-env:latest # Sua imagem Docker

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Start Xvfb
      run: Xvfb :99 -screen 0 1024x768x24 &

    - name: Wait for Xvfb
      run: sleep 5

    - name: Download LibGDX Liftoff (se nÃ£o estiver no repo)
      run: wget -O gdx-setup.jar https://github.com/libgdx/gdx-liftoff/releases/download/1.13.1.3/gdx-liftoff-1.13.1.3.jar

    - name: Make script executable
      run: chmod +x build_env.sh

    - name: Run build script and collect info
      id: build_script
      run: |
        export DISPLAY=:99
        ./build_env.sh > build.log 2>&1
        cat build.log

    - name: Upload Log File
      uses: actions/upload-artifact@v4
      with:
        name: build-log
        path: build.log

    - name: Check for Project ZIP
      id: check_project_zip
      # ... (rest of your workflow)
    - name: Upload Project ZIP (se criado)
      # ...
    - name: Check for APK
      # ...
    - name: Upload APK (se gerado)
      # ...
    - name: Upload Liftoff JAR
      # ...
    - name: Create Release (with Log Mention)
      # ...
    ```
